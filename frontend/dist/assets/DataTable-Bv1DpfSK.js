import{o as n,c as a,a as s,d as h,F as k,j as p,D as B,t as m,n as T,w as x,E as C,m as r,b as N}from"./index-BFw-5ybC.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";const R={class:"data-table-wrapper"},z={class:"table-scroll"},E={class:"data-table"},L={key:0,class:"col-checkbox"},j=["checked","indeterminate"],q={key:1,class:"col-actions"},I={key:0},M=["colspan"],G={key:1},H=["colspan"],J={class:"empty-state"},K=["onClick"],O=["checked","onChange","disabled"],P={__name:"DataTable",props:{columns:{type:Array,required:!0},data:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},selectable:{type:Boolean,default:!1},selectableFilter:{type:Function,default:null},selected:{type:Array,default:()=>[]},emptyText:{type:String,default:"No data found"}},emits:["row-click","update:selected","selection-change"],setup(o,{expose:S,emit:F}){const i=o,d=F,y=r(()=>i.data),f=r(()=>new Set((i.selected||[]).map(e=>e.id))),u=r(()=>i.selectableFilter?y.value.filter(i.selectableFilter):y.value),b=r(()=>u.value.length>0&&u.value.every(e=>f.value.has(e.id))),_=r(()=>{const e=u.value.filter(l=>f.value.has(l.id));return e.length>0&&e.length<u.value.length}),v=r(()=>{let e=i.columns.length;return i.selectable&&e++,e++,e});function g(e){return f.value.has(e.id)}function $(e){const l=i.selected||[];let t;l.find(c=>c.id===e.id)?t=l.filter(c=>c.id!==e.id):t=[...l,e],d("update:selected",t),d("selection-change",t)}function D(){let e;b.value?e=[]:e=[...u.value],d("update:selected",e),d("selection-change",e)}function w(e){d("row-click",e)}function A(e,l){return e==null?"—":l.type==="date"?new Date(e).toLocaleDateString():l.type==="currency"?`₹${parseFloat(e).toFixed(2)}`:e}return S({clearSelection:()=>{d("update:selected",[]),d("selection-change",[])}}),(e,l)=>(n(),a("div",R,[s("div",z,[s("table",E,[s("thead",null,[s("tr",null,[o.selectable?(n(),a("th",L,[s("input",{type:"checkbox",checked:b.value,onChange:D,indeterminate:_.value},null,40,j)])):h("",!0),(n(!0),a(k,null,p(o.columns,t=>(n(),a("th",{key:t.key,style:B(t.width?{width:t.width}:{})},m(t.label),5))),128)),e.$slots.actions?(n(),a("th",q,"Actions")):h("",!0)])]),s("tbody",null,[o.loading?(n(),a("tr",I,[s("td",{colspan:v.value,class:"cell-center"},[...l[2]||(l[2]=[s("div",{class:"loading-overlay"},[s("div",{class:"spinner"})],-1)])],8,M)])):y.value.length?(n(!0),a(k,{key:2},p(y.value,t=>(n(),a("tr",{key:t.id,class:T({"row-selected":g(t)}),onClick:c=>w(t),style:{cursor:"pointer"}},[o.selectable?(n(),a("td",{key:0,class:"col-checkbox",onClick:l[0]||(l[0]=x(()=>{},["stop"]))},[s("input",{type:"checkbox",checked:g(t),onChange:c=>$(t),disabled:o.selectableFilter&&!o.selectableFilter(t)},null,40,O)])):h("",!0),(n(!0),a(k,null,p(o.columns,c=>(n(),a("td",{key:c.key},[C(e.$slots,`cell-${c.key}`,{row:t,value:t[c.key]},()=>[N(m(A(t[c.key],c)),1)])]))),128)),e.$slots.actions?(n(),a("td",{key:1,class:"col-actions",onClick:l[1]||(l[1]=x(()=>{},["stop"]))},[C(e.$slots,"actions",{row:t},void 0)])):h("",!0)],10,K))),128)):(n(),a("tr",G,[s("td",{colspan:v.value},[s("div",J,[l[3]||(l[3]=s("i",{class:"bi bi-inbox"},null,-1)),s("p",null,m(o.emptyText),1)])],8,H)]))])])])]))}},W=V(P,[["__scopeId","data-v-dd23e4dc"]]);export{W as D};
