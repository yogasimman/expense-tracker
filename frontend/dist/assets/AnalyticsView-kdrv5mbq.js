import{q as v,s as b,H as _,c as h,p as l,a,r,_ as y,o as g}from"./index-C6ZveIad.js";import{P as m}from"./PageHeader-DIKsNb4s.js";import{S as n}from"./StatCard-DBIiFOJ4.js";import{_ as f}from"./_plugin-vue_export-helper-DlAUqK2U.js";const E={class:"stats-grid"},A={class:"charts-grid mt-6"},x={class:"card"},C={class:"card-body chart-body"},T={class:"card"},w={class:"card-body chart-body"},k={class:"charts-grid mt-4"},D={class:"card",style:{"grid-column":"1 / -1"}},N={class:"card-body chart-body-wide"},S={__name:"AnalyticsView",setup(I){const e=r({}),i=r(null),c=r(null),d=r(null);async function p(){const{Chart:t,registerables:s}=await y(async()=>{const{Chart:o,registerables:u}=await import("./chart-19k6OvwP.js");return{Chart:o,registerables:u}},[]);if(t.register(...s),i.value&&new t(i.value,{type:"doughnut",data:{labels:["Pending","Approved","Rejected"],datasets:[{data:[e.value.pendingExpenses||0,e.value.approvedExpenses||0,e.value.rejectedExpenses||0],backgroundColor:["#D97706","#059669","#DC2626"],borderWidth:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}}),c.value&&new t(c.value,{type:"doughnut",data:{labels:["Local","Domestic","International"],datasets:[{data:[e.value.localTrips||0,e.value.domesticTrips||0,e.value.internationalTrips||0],backgroundColor:["#4F46E5","#0891B2","#7C3AED"],borderWidth:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}}),d.value){const o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],u=e.value.monthlyTrend||o.map(()=>0);new t(d.value,{type:"bar",data:{labels:o,datasets:[{label:"Expenses (₹)",data:u,backgroundColor:"#4F46E5",borderRadius:6}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,grid:{color:"#E2E8F0"}},x:{grid:{display:!1}}}}})}}return v(async()=>{try{const t=await b.getDashboard();e.value=t.stats||t||{}}catch(t){console.error(t)}await _(),p()}),(t,s)=>(g(),h("div",null,[l(m,{title:"Analytics",icon:"bi bi-bar-chart-fill",subtitle:"Insights into your expenses and trips"}),a("div",E,[l(n,{icon:"bi bi-airplane-fill",label:"Total Trips",value:e.value.totalTrips||0,color:"primary"},null,8,["value"]),l(n,{icon:"bi bi-receipt-cutoff",label:"Total Expenses",value:e.value.totalExpenses||0,color:"success"},null,8,["value"]),l(n,{icon:"bi bi-cash-stack",label:"Total Spent",value:"₹"+Number(e.value.totalExpenseAmount||0).toLocaleString("en-IN"),color:"warning"},null,8,["value"]),l(n,{icon:"bi bi-credit-card-fill",label:"Total Advanced",value:"₹"+Number(e.value.totalAdvanceAmount||0).toLocaleString("en-IN"),color:"danger"},null,8,["value"])]),a("div",A,[a("div",x,[s[0]||(s[0]=a("div",{class:"card-header"},[a("span",{class:"card-title"},"Expenses by Status")],-1)),a("div",C,[a("canvas",{ref_key:"statusChart",ref:i},null,512)])]),a("div",T,[s[1]||(s[1]=a("div",{class:"card-header"},[a("span",{class:"card-title"},"Trips by Type")],-1)),a("div",w,[a("canvas",{ref_key:"typeChart",ref:c},null,512)])])]),a("div",k,[a("div",D,[s[2]||(s[2]=a("div",{class:"card-header"},[a("span",{class:"card-title"},"Monthly Expense Trend")],-1)),a("div",N,[a("canvas",{ref_key:"trendChart",ref:d},null,512)])])])]))}},F=f(S,[["__scopeId","data-v-b3c87a27"]]);export{F as default};
