import{C as p,r as l,s}from"./index-BFw-5ybC.js";const w=p("advances",()=>{const n=l([]),r=l(!1),u=l(null);async function i(e={}){r.value=!0,u.value=null;try{n.value=await s.getAdvances(e)}catch(a){u.value=a.message}finally{r.value=!1}}async function o(e){return await s.createAdvance(e)}async function d(e){const a=await s.deleteAdvance(e);return a.success&&(n.value=n.value.filter(t=>t.id!==e)),a}async function f(e){const a=await s.approveAdvances(e);return a.success&&e.forEach(t=>{const c=n.value.findIndex(v=>v.id===t);c!==-1&&(n.value[c].status="approved")}),a}async function A(e,a){const t=await s.rejectAdvance(e,a);if(t.success){const c=n.value.findIndex(v=>v.id===e);c!==-1&&(n.value[c].status="rejected",n.value[c].rejection_reason=a)}return t}return{advances:n,loading:r,error:u,fetchAdvances:i,createAdvance:o,deleteAdvance:d,approveAdvances:f,rejectAdvance:A}});export{w as u};
