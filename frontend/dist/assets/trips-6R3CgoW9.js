import{C as h,r as c,s as i}from"./index-BFw-5ybC.js";const g=h("trips",()=>{const a=c([]),l=c(null),n=c(!1),u=c(null);async function f(t={}){n.value=!0,u.value=null;try{a.value=await i.getTrips(t)}catch(e){u.value=e.message}finally{n.value=!1}}async function o(t){n.value=!0,u.value=null;try{return l.value=await i.getTrip(t),l.value}catch(e){u.value=e.message}finally{n.value=!1}}async function p(t){const e=await i.createTrip(t);return e.success&&await f(),e}async function v(t){const e=await i.deleteTrip(t);return e.success&&(a.value=a.value.filter(s=>s.id!==t)),e}async function d(t,e){const s=await i.updateTripStatus(t,e);if(s.success){const r=a.value.findIndex(y=>y.id===t);r!==-1&&(a.value[r].status=e)}return s}async function T(t){const e=await i.finishTrip(t);if(e.success){const s=a.value.findIndex(r=>r.id===t);s!==-1&&(a.value[s].status="finished")}return e}return{trips:a,currentTrip:l,loading:n,error:u,fetchTrips:f,fetchTrip:o,createTrip:p,deleteTrip:v,updateStatus:d,finishTrip:T}});export{g as u};
